<h1 mat-dialog-title> Create Event </h1>
<div mat-dialog-content>
	<form [formGroup]="data">
	<mat-card>
		<mat-card-content>
		<mat-list> 
			<mat-list-item>
				<mat-form-field>
					<mat-label>Name*</mat-label>
					<input matInput placeholder="Name"
						[formControl]="data.get('name')">

					<mat-error
						*ngIf="data.get('name').hasError('required') ||
						data.get('name').dirty">
						Name is <strong>required</strong>
					</mat-error>
				</mat-form-field>
			</mat-list-item>


			<mat-list-item>
					<mat-slide-toggle
						[formControl]="data.get('isVerificationRequired')"
						[color]="primary"
						[checked]="checked">
						Require Verification
					</mat-slide-toggle>
			</mat-list-item>

			<mat-list-item>
					<mat-slide-toggle
						[formControl]="data.get('isSignupRequired')"
						[color]="primary"
						[checked]="checked">
						Require user to Signup
					</mat-slide-toggle>
			</mat-list-item>

			<mat-list-item>
				<input placeholder="Select a date range"
					[style.width]="'350px'"
					[formControl]="data.get('date')"
					[selectMode]="'range'"
					[owlDateTimeTrigger]="datePicker" 
					[owlDateTime]="datePicker">
				 <owl-date-time #datePicker></owl-date-time>
			</mat-list-item>

			<mat-list-item>
					<ng-select
						[items]="users | async"
						[multiple]="true"
						[closeOnSelect]="false"
						[hideSelected]="true"
						bindLabel="firstName"
						bindValie="_id"
						placeholder="Select OIC"
						[formControl]="data.get('OIC')">
					</ng-select>
			</mat-list-item>

			<mat-list-item>
				<mat-form-field>
				<div formArrayName="additionalDetails">
					<mat-list-item *ngFor="let detail of
					data.controls.additionalDetails.controls; let i=index">
						<div>
							<!---<span>Detail {{i + 1}}</span>-->
							<span
								*ngIf="data.controls.additionalDetails.controls.length> 1"
								(click)="removeDetailField(i)">
							</span>
						</div>

						<div [formGroupName]="i">
							<!-- Dynamic Field Title -->
							<div>
								<mat-label>Title</mat-label>
								<input matInput
								formControlName="title">
							</div>

							<!-- Dynamic Field details -->
							<div>
								<mat-label>Details</mat-label>
								<input matInput
								formControlName="details">
							</div>
						</div>
					</mat-list-item>
				</div>
				<div>
					 <a (click)="addDetailField()" style="cursor: default">
					 	Add another field
					 </a>
				</div>
				</mat-form-field>


			</mat-list-item>

		</mat-list>
		</mat-card-content>

		<div mat-dialog-actions>
			<button mat-button (click)="onNoClick()">Cancel</button>
			<button mat-button [mat-dialog-close]="data" 
					[disabled]="data.get('name').invalid || 
								data.get('date').invalid">
			Submit</button>
		</div>
	</mat-card>
	</form>
</div>
